#!/bin/bash
#
# RUN AS ROOT - Happy SPUing!
#

if [ $(id -u) != 0 ]; then
    printf "Please run as root.\n"
    exit 1
fi

cp -fv rpm-gpg/RPM-GPG-KEY-cellsdk /etc/pki/rpm-gpg/RPM-GPG-KEY-cellsdk
cp -fv rpm-gpg/RPM-GPG-KEY-cellsdk-open /etc/pki/rpm-gpg/RPM-GPG-KEY-cellsdk-open
cp -fv yum.repos.d/cellsdk.repo /etc/yum.repos.d/cellsdk.repo

yum clean all
yum makecache

yum -y groupinstall "Cell Development Libraries" "Cell Development Tools" "Cell Programming Examples" "Cell Runtime Environment"
yum -y install rsync sed ed wget elfspe2 netpbm netpbm-devel libX11.ppc64 libX11-devel.ppc64 tcl.ppc64 tcl-devel.ppc64 tk.ppc64 tk-devel.ppc64 alf-compat alf-spu-trace-devel alf-trace-devel alfxds-devel cell-spu-isolation-devel dacs-compat dacs-trace-devel fdpr-launcher libfft-devel libfft3d-devel libmc-rand-devel pdt-devel ppu-mass-compat spu-timer-devel trace-devel alf-ide-template cell-spu-isolation-tool-source cell-xlc-ssc-cmp cell-xlc-ssc-help cell-xlc-ssc-lib cell-xlc-ssc-man cell-xlc-ssc-omp cell-xlc-ssc-rte cell-xlc-ssc-rte-lnk cellide dacs-tools ibm-java2-ppc-jre ppu-gcc-fortran ppu-gcc-gnat ppu-gcc43 ppu-gcc43-c++ ppu-gcc43-fortran spu-gcc-fortran spu-gcc43 spu-gcc43-c++ spu-gcc43-fortran alfxds-examples-source cell-compliance-tests cell-compliance-tests-source libfft-examples-source libfft3d-examples-source alfxds cell-spu-isolation-loader datamover-pcie-axon libfft libfft3d alf-trace cell-spu-timing cellperfctr-driver cellperfctr-tools dacs-trace fdprpro pdt pdtr trace libspe2man libspe2.ppc libspe2-devel.ppc libspe2.ppc64 libspe2-devel.ppc64 libspe2-adabinding-devel numactl.ppc numactl-devel.ppc numactl.ppc64 numactl-devel.ppc64 blas-devel.ppc blas-devel.ppc64 oprofile oprofile-gui 

printf "\nNew service (elfspe2) installed. REBOOT!\n\n"

exit 0

